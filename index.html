<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nova - Minimal Movie & Show Browser</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <style>
    /* Minimal dark theme with purple accent */
    body {
      margin: 0;
      background: #0f0f0f;
      color: #eee;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 2rem;
    }
    #app {
      max-width: 1024px;
      width: 100%;
    }
    button {
      cursor: pointer;
      border: none;
      background: #292929;
      color: #aaa;
      font-weight: 600;
      transition: background-color 0.2s ease, color 0.2s ease;
      border-radius: 6px;
      padding: 0.5rem 1rem;
    }
    button:hover:not(:disabled) {
      background: #6b46c1;
      color: #fff;
    }
    button:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    input[type="text"] {
      width: 100%;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      border: 1px solid #333;
      background: #1a1a1a;
      color: #eee;
      font-size: 1rem;
      font-weight: 500;
      box-sizing: border-box;
      transition: border-color 0.2s ease;
    }
    input[type="text"]:focus {
      outline: none;
      border-color: #6b46c1;
      box-shadow: 0 0 8px #6b46c1aa;
    }
    .tabs {
      display: flex;
      gap: 1rem;
      margin: 1.5rem 0;
    }
    .tabs button.active {
      background: #6b46c1;
      color: #fff;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill,minmax(150px,1fr));
      gap: 1rem;
    }
    .card {
      background: #1a1a1a;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 8px #0008;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      transition: box-shadow 0.2s ease;
    }
    .card:hover {
      box-shadow: 0 0 15px #6b46c1cc;
    }
    .card img {
      width: 100%;
      height: 220px;
      object-fit: cover;
    }
    .card-info {
      padding: 0.75rem 1rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .card-info h3 {
      font-size: 1rem;
      margin: 0 0 0.3rem 0;
      font-weight: 600;
      line-height: 1.2;
      color: #ddd;
    }
    .card-info p {
      margin: 0;
      font-size: 0.85rem;
      color: #aaa;
      user-select: none;
    }
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 2rem;
      gap: 1rem;
      user-select: none;
    }
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    .modal {
      background: #121212;
      max-width: 600px;
      width: 90%;
      padding: 2rem;
      border-radius: 12px;
      overflow-y: auto;
      max-height: 80vh;
      color: #eee;
      box-shadow: 0 0 25px #6b46c1aa;
      position: relative;
    }
    .modal h2 {
      margin-top: 0;
      font-weight: 700;
    }
    .modal p {
      line-height: 1.4;
      margin-bottom: 1.5rem;
      color: #bbb;
    }
    .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      color: #aaa;
      cursor: pointer;
      transition: color 0.2s ease;
    }
    .modal-close:hover {
      color: #fff;
    }
  </style>
</head>
<body>
  <main id="app" x-data="novaApp()" x-init="fetchContent()">
    <!-- Search -->
    <input
      type="text"
      placeholder="Search movies or shows..."
      x-model.debounce.500ms="searchQuery"
      @input="searchQuery.trim() ? searchContent() : fetchContent()"
      autocomplete="off"
      spellcheck="false"
      autocorrect="off"
      autocapitalize="off"
      aria-label="Search movies or shows"
    />

    <!-- Tabs -->
    <div class="tabs">
      <button
        :class="{ 'active': currentTab === 'movies' }"
        @click="switchTab('movies')"
        type="button"
      >Movies</button>
      <button
        :class="{ 'active': currentTab === 'shows' }"
        @click="switchTab('shows')"
        type="button"
      >Shows</button>
    </div>

    <!-- Content Grid -->
    <div class="grid" aria-live="polite" aria-atomic="true">
      <template x-if="content.length === 0">
        <p class="text-center text-gray-500" style="grid-column: 1 / -1; text-align:center;">No results found.</p>
      </template>
      <template x-for="item in content" :key="item.id">
        <article class="card" @click="openContent(item)" tabindex="0" @keydown.enter.prevent="openContent(item)" role="button" aria-pressed="false" :aria-label="(item.title || item.name) + ', rating: ' + (item.vote_average.toFixed(1) || 'N/A') + ' out of 10'">
          <img :src="`https://image.tmdb.org/t/p/w300${item.poster_path}`" :alt="item.title || item.name" loading="lazy" />
          <div class="card-info">
            <h3 x-text="item.title || item.name"></h3>
            <p>‚≠ê <span x-text="item.vote_average.toFixed(1)"></span>/10</p>
          </div>
        </article>
      </template>
    </div>

    <!-- Pagination -->
    <nav class="pagination" role="navigation" aria-label="Pagination navigation">
      <button
        :disabled="currentPage === 1"
        @click="changePage(currentPage - 1)"
        aria-disabled="currentPage === 1"
        type="button"
      >Prev</button>
      <span>Page <span x-text="currentPage"></span></span>
      <button
        @click="changePage(currentPage + 1)"
        type="button"
      >Next</button>
    </nav>

    <!-- Modal -->
    <div
      x-show="showModal"
      x-transition.opacity
      class="modal-backdrop"
      @click.self="showModal = false"
      style="display: none;"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modalTitle"
    >
      <section class="modal" tabindex="-1">
        <button class="modal-close" aria-label="Close modal" @click="showModal = false">&times;</button>
        <h2 id="modalTitle" x-text="selectedContent.title || selectedContent.name"></h2>
        <p x-text="selectedContent.overview || 'No description available.'"></p>
      </section>
    </div>

    <script>
      function novaApp() {
        return {
          apiKey: '1070730380f5fee0d87cf0382670b255',
          currentTab: 'movies',
          searchQuery: '',
          currentPage: 1,
          content: [],
          showModal: false,
          selectedContent: null,

          async fetchContent() {
            try {
              const res = await fetch(`https://api.themoviedb.org/3/${this.currentTab === 'movies' ? 'movie/popular' : 'tv/popular'}?api_key=${this.apiKey}&language=en-US&page=${this.currentPage}`);
              const data = await res.json();
              this.content = data.results || [];
            } catch (e) {
              console.error('Failed to fetch content', e);
              this.content = [];
            }
          },

          async searchContent() {
            if (!this.searchQuery.trim()) {
              this.currentPage = 1;
              return this.fetchContent();
            }
            try {
              const res = await fetch(`https://api.themoviedb.org/3/search/${this.currentTab === 'movies' ? 'movie' : 'tv'}?api_key=${this.apiKey}&query=${encodeURIComponent(this.searchQuery)}&language=en-US&page=${this.currentPage}`);
              const data = await res.json();
              this.content = data.results || [];
            } catch (e) {
              console.error('Search failed', e);
              this.content = [];
            }
          },

          changePage(page) {
            if (page < 1) return;
            this.currentPage = page;
            if (this.searchQuery.trim()) {
              this.searchContent();
            } else {
              this.fetchContent();
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
          },

          switchTab(tab) {
            if (this.currentTab === tab) return;
            this.currentTab = tab;
            this.currentPage = 1;
            this.searchQuery = '';
            this.fetchContent();
          },

          openContent(item) {
            this.selectedContent = item;
            this.showModal = true;
            // Focus modal for accessibility
            setTimeout(() => {
              document.querySelector('.modal').focus();
            }, 50);
          }
        }
      }
    </script>
  </main>
</body>
</html>
